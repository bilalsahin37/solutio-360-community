"<!DOCTYPE html><html><head><title>Chat Test - Fixed</title><meta name='viewport' content='width=device-width, initial-scale=1.0'></head><body style='font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0;'><div style='max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px;'><h1>?? Chat Widget Test - Z-Index Fixed</h1><p>Chat penceresi artçk îne áçkacak üekilde dÅzeltildi.</p></div><div id='clean-chat' style='position: fixed; bottom: 20px; right: 20px; z-index: 99999; font-family: Arial, sans-serif;'><button id='chat-btn' style='width: 60px; height: 60px; border-radius: 50%; border: none; background: #007bff; color: white; font-size: 24px; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.3); transition: transform 0.2s; z-index: 99998;'>??</button><div id='chat-window' style='position: fixed; bottom: 90px; right: 20px; width: 320px; height: 450px; background: white; border: 1px solid #ddd; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); display: none; flex-direction: column; z-index: 99999;'><div style='background: #007bff; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; border-radius: 12px 12px 0 0;'><div style='display: flex; align-items: center; gap: 8px;'><div style='width: 8px; height: 8px; background: #28a745; border-radius: 50%;'></div><strong>AI Asistan</strong></div><button onclick='closeChat()' style='background: none; border: none; color: white; font-size: 20px; cursor: pointer; padding: 0; width: 24px; height: 24px;'>&times;</button></div><div id='messages' style='flex: 1; padding: 15px; overflow-y: auto; background: #f8f9fa;'><div style='background: #e9ecef; padding: 12px 16px; border-radius: 18px; margin-bottom: 12px; max-width: 85%;'>Merhaba! Size nasçl yardçmcç olabilirim? ??</div></div><div style='padding: 15px; display: flex; gap: 10px; border-top: 1px solid #eee; background: white; border-radius: 0 0 12px 12px;'><input type='text' id='msg-input' placeholder='Mesajçnçzç yazçn...' style='flex: 1; padding: 12px 16px; border: 1px solid #ddd; border-radius: 25px; outline: none; font-size: 14px;'><button onclick='sendMsg()' style='padding: 12px 18px; background: #007bff; color: white; border: none; border-radius: 25px; cursor: pointer; font-weight: 500;'>Gînder</button></div></div></div><script>let chatOpen=false;function toggleChat(){console.log('Chat toggle clicked');const chatWindow=document.getElementById('chat-window');const chatBtn=document.getElementById('chat-btn');chatOpen=!chatOpen;if(chatOpen){chatWindow.style.display='flex';chatWindow.style.zIndex='99999';chatBtn.style.zIndex='99998';console.log('Chat aáçldç - z-index ayarlandç');setTimeout(()=>{const input=document.getElementById('msg-input');if(input)input.focus()},100)}else{chatWindow.style.display='none';console.log('Chat kapatçldç')}}function closeChat(){console.log('Close chat clicked');chatOpen=false;const chatWindow=document.getElementById('chat-window');chatWindow.style.display='none'}function addMsg(text,isUser=false){const messages=document.getElementById('messages');const messageDiv=document.createElement('div');messageDiv.style.cssText=`background:${isUser?'#007bff':'#e9ecef'};color:${isUser?'white':'#333'};padding:12px 16px;border-radius:18px;margin-bottom:12px;max-width:85%;word-wrap:break-word;${isUser?'margin-left:auto;text-align:right;':''}`;messageDiv.textContent=text;messages.appendChild(messageDiv);messages.scrollTop=messages.scrollHeight}function showTyping(){const messages=document.getElementById('messages');const typingDiv=document.createElement('div');typingDiv.id='typing-indicator';typingDiv.style.cssText='background:#e9ecef;padding:12px 16px;border-radius:18px;margin-bottom:12px;font-style:italic;max-width:85%;';typingDiv.innerHTML='?? AI yazçyor...';messages.appendChild(typingDiv);messages.scrollTop=messages.scrollHeight}function hideTyping(){const typing=document.getElementById('typing-indicator');if(typing)typing.remove()}async function sendMsg(){const input=document.getElementById('msg-input');const message=input.value.trim();if(!message)return;console.log('Mesaj gînderiliyor:',message);addMsg(message,true);input.value='';showTyping();try{const response=await fetch('/api/chat/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:message})});hideTyping();console.log('API yançt durumu:',response.status);if(response.ok){const data=await response.json();console.log('API yançt:',data);addMsg(data.response||data.message||'Yançt alçnamadç')}else{addMsg('Baßlantç hatasç ('+response.status+')')}}catch(error){hideTyping();addMsg('Aß hatasç');console.error('Chat error:',error)}}document.addEventListener('DOMContentLoaded',function(){console.log('Chat widget yÅklendi');const chatBtn=document.getElementById('chat-btn');const msgInput=document.getElementById('msg-input');chatBtn.onclick=toggleChat;chatBtn.onmouseenter=()=>chatBtn.style.transform='scale(1.1)';chatBtn.onmouseleave=()=>chatBtn.style.transform='scale(1)';msgInput.onkeypress=function(e){if(e.key==='Enter'){e.preventDefault();sendMsg()}}});console.log('? Fixed Chat Widget loaded');</script></body></html>" 
