<!DOCTYPE html><html><head><title>Chat Fixed - CDN Free</title><style>body{font-family:Arial,sans-serif;padding:20px;background:#f0f0f0;margin:0}#clean-chat{position:fixed!important;bottom:20px!important;right:20px!important;z-index:999999!important}#chat-btn{width:60px;height:60px;border-radius:50%;border:none;background:#007bff;color:white;font-size:24px;cursor:pointer;box-shadow:0 6px 20px rgba(0,123,255,0.4);z-index:999998!important;transition:transform 0.3s}#chat-btn:hover{transform:scale(1.1)}#chat-window{position:fixed!important;bottom:90px!important;right:20px!important;width:350px!important;height:500px!important;background:white!important;border:2px solid #007bff!important;border-radius:15px!important;box-shadow:0 15px 35px rgba(0,0,0,0.3)!important;display:none;flex-direction:column;z-index:999999!important;overflow:hidden}.chat-header{background:#007bff;color:white;padding:18px;display:flex;justify-content:space-between;align-items:center;border-radius:13px 13px 0 0}#close-chat{background:none;border:none;color:white;font-size:22px;cursor:pointer;padding:5px;border-radius:50%;width:30px;height:30px}#close-chat:hover{background:rgba(255,255,255,0.2)}#messages{flex:1;padding:20px;overflow-y:auto;background:#f8f9fa;max-height:350px}.message{padding:12px 16px;border-radius:18px;margin-bottom:12px;max-width:85%;word-wrap:break-word}.message.bot{background:#e9ecef;color:#333}.message.user{background:#007bff;color:white;margin-left:auto;text-align:right}.chat-input{padding:20px;display:flex;gap:12px;border-top:1px solid #eee;background:white;border-radius:0 0 13px 13px}#msg-input{flex:1;padding:14px 18px;border:2px solid #ddd;border-radius:25px;outline:none;font-size:14px}#msg-input:focus{border-color:#007bff}#send-btn{padding:14px 20px;background:#007bff;color:white;border:none;border-radius:25px;cursor:pointer;font-weight:600}#send-btn:hover{background:#0056b3}</style></head><body><div style="max-width:800px;margin:0 auto;background:white;padding:30px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1)"><h1>?? Chat Widget - CDN Free & Z-Index Fixed</h1><p><strong>Özellikler:</strong></p><ul><li>? CDN baðýmlýlýðý yok</li><li>? Z-index 999999 (en üstte)</li><li>? Tamamen local CSS/JS</li><li>? Responsive tasarým</li></ul><p><strong>Test:</strong> Sað alt köþedeki chat butonuna týklayýn!</p></div><div id="clean-chat"><button id="chat-btn">??</button><div id="chat-window"><div class="chat-header"><div style="display:flex;align-items:center;gap:10px"><div style="width:10px;height:10px;background:#28a745;border-radius:50%"></div><strong>AI Asistan</strong></div><button id="close-chat">&times;</button></div><div id="messages"><div class="message bot">Merhaba! Ben AI asistanýnýzým. Size nasýl yardýmcý olabilirim? ??</div></div><div class="chat-input"><input type="text" id="msg-input" placeholder="Mesajýnýzý yazýn..."><button id="send-btn">Gönder</button></div></div></div><script>let chatOpen=false;function toggleChat(){console.log("Chat toggle clicked");const chatWindow=document.getElementById("chat-window");const chatBtn=document.getElementById("chat-btn");chatOpen=!chatOpen;if(chatOpen){chatWindow.style.display="flex";chatWindow.style.zIndex="999999";chatBtn.style.zIndex="999998";console.log("Chat açýldý - Z-index:",chatWindow.style.zIndex);setTimeout(()=>{const input=document.getElementById("msg-input");if(input){input.focus();console.log("Input focus edildi")}},100)}else{chatWindow.style.display="none";console.log("Chat kapatýldý")}}function closeChat(){console.log("Close chat clicked");chatOpen=false;document.getElementById("chat-window").style.display="none"}function addMsg(text,isUser=false){const messages=document.getElementById("messages");const messageDiv=document.createElement("div");messageDiv.className="message "+(isUser?"user":"bot");messageDiv.textContent=text;messages.appendChild(messageDiv);messages.scrollTop=messages.scrollHeight;console.log("Mesaj eklendi:",text.substring(0,30)+"...")}function showTyping(){const messages=document.getElementById("messages");const typingDiv=document.createElement("div");typingDiv.id="typing-indicator";typingDiv.className="message bot";typingDiv.innerHTML="?? AI yazýyor...";messages.appendChild(typingDiv);messages.scrollTop=messages.scrollHeight}function hideTyping(){const typing=document.getElementById("typing-indicator");if(typing){typing.remove()}}async function sendMsg(){const input=document.getElementById("msg-input");const message=input.value.trim();if(!message)return;console.log("Mesaj gönderiliyor:",message);addMsg(message,true);input.value="";showTyping();try{const response=await fetch("/api/chat/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:message})});hideTyping();console.log("API yanýt durumu:",response.status);if(response.ok){const data=await response.json();console.log("API yanýt:",data);addMsg(data.response||data.message||"Yanýt alýnamadý")}else{addMsg("Baðlantý hatasý ("+response.status+")")}catch(error){hideTyping();addMsg("Að hatasý");console.error("Chat error:",error)}}document.addEventListener("DOMContentLoaded",function(){console.log("CDN-Free Chat Widget yüklendi");const chatBtn=document.getElementById("chat-btn");const msgInput=document.getElementById("msg-input");const sendBtn=document.getElementById("send-btn");const closeBtn=document.getElementById("close-chat");chatBtn.onclick=toggleChat;closeBtn.onclick=closeChat;sendBtn.onclick=sendMsg;msgInput.onkeypress=function(e){if(e.key==="Enter"){e.preventDefault();sendMsg()}};console.log("Chat container z-index:",document.getElementById("clean-chat").style.zIndex||"default");fetch("/api/chat/",{method:"OPTIONS"}).then(response=>{if(response.ok||response.status===405){console.log("? API endpoint eriþilebilir")}else{console.warn("?? API endpoint sorunu:",response.status)}}).catch(error=>{console.error("? API test hatasý:",error)});console.log("? Chat Widget tamamen hazýr!")});</script></body></html>
